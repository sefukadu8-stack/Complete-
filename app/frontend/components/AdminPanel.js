
Action: bulk_file_creator ["/app/frontend/src/components/AdminPanel.js"] ['import React, { useState, useEffect } from \'react\';\nimport axios from \'axios\';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || \'http://localhost:8001\';\n\nconst AdminPanel = ({ \n  show, \n  onClose, \n  adminToken, \n  onLogin, \n  onLogout,\n  isLoggedIn \n}) => {\n  const [currentTab, setCurrentTab] = useState(\'dashboard\');\n  const [loginData, setLoginData] = useState({ username: \'\', password: \'\' });\n  const [products, setProducts] = useState([]);\n  const [settings, setSettings] = useState({});\n  const [stats, setStats] = useState({});\n  const [newProduct, setNewProduct] = useState({\n    name: \'\',\n    description: \'\',\n    price: \'\',\n    original_price: \'\',\n    category: \'festive\',\n    sizes: \'S,M,L,XL,XXL\',\n    fabric: \'\',\n    images: [\'\']\n  });\n  const [editingProduct, setEditingProduct] = useState(null);\n\n  useEffect(() => {\n    if (show && isLoggedIn) {\n      loadAdminData();\n    }\n  }, [show, isLoggedIn]);\n\n  const loadAdminData = async () => {\n    try {\n      const [productsRes, settingsRes, statsRes] = await Promise.all([\n        axios.get(`${BACKEND_URL}/api/products`),\n        axios.get(`${BACKEND_URL}/api/settings`),\n        axios.get(`${BACKEND_URL}/api/admin/stats`, {\n          headers: { Authorization: `Bearer ${adminToken}` }\n        })\n      ]);\n      \n      setProducts(productsRes.data);\n      setSettings(settingsRes.data);\n      setStats(statsRes.data);\n    } catch (error) {\n      console.error(\'Error loading admin data:\', error);\n    }\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    const success = await onLogin(loginData.username, loginData.password);\n    if (success) {\n      setLoginData({ username: \'\', password: \'\' });\n    }\n  };\n\n  const handleAddProduct = async (e) => {\n    e.preventDefault();\n    try {\n      const productData = {\n        ...newProduct,\n        price: parseFloat(newProduct.price),\n        original_price: newProduct.original_price ? parseFloat(newProduct.original_price) : null,\n        sizes: newProduct.sizes.split(\',\').map(s => s.trim()),\n        images: newProduct.images.filter(img => img.trim() !== \'\')\n      };\n\n      await axios.post(`${BACKEND_URL}/api/admin/products`, productData, {\n        headers: { Authorization: `Bearer ${adminToken}` }\n      });\n\n      // Reset form\n      setNewProduct({\n        name: \'\', description: \'\', price: \'\', original_price: \'\',\n        category: \'festive\', sizes: \'S,M,L,XL,XXL\', fabric: \'\', images: [\'\']\n      });\n      \n      loadAdminData();\n      setCurrentTab(\'products\');\n      alert(\'Product added successfully!\');\n    } catch (error) {\n      console.error(\'Error adding product:\', error);\n      alert(\'Error adding product\');\n    }\n  };\n\n  const handleDeleteProduct = async (productId) => {\n    if (window.confirm(\'Are you sure you want to delete this product?\')) {\n      try {\n        await axios.delete(`${BACKEND_URL}/api/admin/products/${productId}`, {\n          headers: { Authorization: `Bearer ${adminToken}` }\n        });\n        loadAdminData();\n        alert(\'Product deleted successfully!\');\n      } catch (error) {\n        console.error(\'Error deleting product:\', error);\n        alert(\'Error deleting product\');\n      }\n    }\n  };\n\n  if (!show) return null;\n\n  return (\n    <div className="modal show">\n      <div className="modal-overlay" onClick={onClose}></div>\n      <div className="modal-content admin-modal">\n        <button className="modal-close" onClick={onClose}>\n          <i className="fas fa-times"></i>\n        </button>\n\n        {!isLoggedIn ? (\n          <div className="admin-login">\n            <h2><i className="fas fa-lock"></i> Admin Login</h2>\n            <form onSubmit={handleLogin}>\n              <div className="form-group">\n                <input\n                  type="email"\n                  placeholder="Admin Username"\n                  value={loginData.username}\n                  onChange={(e) => setLoginData({...loginData, username: e.target.value})}\n                  required\n                />\n              </div>\n              <div className="form-group">\n                <input\n                  type="password"\n                  placeholder="Password"\n                  value={loginData.password}\n                  onChange={(e) => setLoginData({...loginData, password: e.target.value})}\n                  required\n                />\n              </div>\n              <button type="submit" className="btn btn-primary" style={{width: \'100%\'}}>\n                <i className="fas fa-sign-in-alt"></i> Login to Admin Panel\n              </button>\n            </form>\n          </div>\n        ) : (\n          <div className="admin-dashboard">\n            <div className="admin-header">\n              <h2><i className="fas fa-tachometer-alt"></i> Admin Dashboard</h2>\n              <button className="btn btn-outline" onClick={onLogout}>\n                <i className="fas fa-sign-out-alt"></i> Logout\n              </button>\n            </div>\n\n            <div className="admin-tabs">\n              <button \n                className={`admin-tab ${currentTab === \'dashboard\' ? \'active\' : \'\'}`}\n                onClick={() => setCurrentTab(\'dashboard\')}\n              >\n                <i className="fas fa-chart-bar"></i> Dashboard\n              </button>\n              <button \n                className={`admin-tab ${currentTab === \'products\' ? \'active\' : \'\'}`}\n                onClick={() => setCurrentTab(\'products\')}\n              >\n                <i className="fas fa-box"></i> Products\n              </button>\n              <button \n                className={`admin-tab ${currentTab === \'add-product\' ? \'active\' : \'\'}`}\n                onClick={() => setCurrentTab(\'add-product\')}\n              >\n                <i className="fas fa-plus"></i> Add Product\n              </button>\n            </div>\n\n            <div className="admin-content">\n              {currentTab === \'dashboard\' && (\n                <div>\n                  <h3>Dashboard Overview</h3>\n                  <div className="stats-grid" style={{display: \'grid\', gridTemplateColumns: \'repeat(auto-fit, minmax(200px, 1fr))\', gap: \'1rem\', marginBottom: \'2rem\'}}>\n                    <div className="stat-card" style={{background: \'var(--white)\', padding: \'1.5rem\', borderRadius: \'var(--radius-lg)\', textAlign: \'center\', boxShadow: \'var(--shadow-md)\'}}>\n                      <div style={{fontSize: \'2rem\', fontWeight: \'700\', color: \'var(--primary-color)\', marginBottom: \'0.5rem\'}}>\n                        {stats.total_products || 0}\n                      </div>\n                      <div style={{color: \'var(--gray-600)\'}}>Total Products</div>\n                    </div>\n                    <div className="stat-card" style={{background: \'var(--white)\', padding: \'1.5rem\', borderRadius: \'var(--radius-lg)\', textAlign: \'center\', boxShadow: \'var(--shadow-md)\'}}>\n                      <div style={{fontSize: \'2rem\', fontWeight: \'700\', color: \'var(--accent-color)\', marginBottom: \'0.5rem\'}}>\n                        {stats.total_orders || 0}\n                      </div>\n                      <div style={{color: \'var(--gray-600)\'}}>Total Orders</div>\n                    </div>\n                    <div className="stat-card" style={{background: \'var(--white)\', padding: \'1.5rem\', borderRadius: \'var(--radius-lg)\', textAlign: \'center\', boxShadow: \'var(--shadow-md)\'}}>\n                      <div style={{fontSize: \'2rem\', fontWeight: \'700\', color: \'var(--secondary-color)\', marginBottom: \'0.5rem\'}}>\n                        ₹{(stats.total_revenue || 0).toLocaleString()}\n                      </div>\n                      <div style={{color: \'var(--gray-600)\'}}>Total Revenue</div>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {currentTab === \'products\' && (\n                <div>\n                  <div style={{display: \'flex\', justifyContent: \'space-between\', alignItems: \'center\', marginBottom: \'2rem\'}}>\n                    <h3>Manage Products ({products.length})</h3>\n                    <button \n                      className="btn btn-primary"\n                      onClick={() => setCurrentTab(\'add-product\')}\n                    >\n                      <i className="fas fa-plus"></i> Add New Product\n                    </button>\n                  </div>\n                  \n                  <div style={{background: \'var(--white)\', borderRadius: \'var(--radius-xl)\', boxShadow: \'var(--shadow-md)\', maxHeight: \'500px\', overflowY: \'auto\'}}>\n                    {products.map(product => (\n                      <div key={product.id} style={{display: \'flex\', justifyContent: \'space-between\', alignItems: \'center\', padding: \'1.5rem\', borderBottom: \'1px solid var(--gray-200)\'}}>\n                        <div style={{flex: 1}}>\n                          <div style={{fontWeight: \'600\', marginBottom: \'0.3rem\'}}>{product.name}</div>\n                          <div style={{color: \'var(--gray-600)\', fontSize: \'0.9rem\'}}>\n                            ₹{product.price.toLocaleString()} • {product.category} • {product.sizes.join(\', \')}\n                            {product.badge && ` • ${product.badge}`}\n                          </div>\n                        </div>\n                        <div style={{display: \'flex\', gap: \'0.5rem\'}}>\n                          <button \n                            className="btn btn-outline" \n                            style={{padding: \'0.5rem 1rem\'}}\n                            onClick={() => {\n                              setEditingProduct(product);\n                              setCurrentTab(\'edit-product\');\n                            }}\n                          >\n                            <i className="fas fa-edit"></i> Edit\n                          </button>\n                          <button \n                            className="btn" \n                            style={{background: \'#dc3545\', color: \'white\', padding: \'0.5rem 1rem\'}}\n                            onClick={() => handleDeleteProduct(product.id)}\n                          >\n                            <i className="fas fa-trash"></i> Delete\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {currentTab === \'add-product\' && (\n                <div>\n                  <h3>Add New Product</h3>\n                  <form onSubmit={handleAddProduct}>\n                    <div className="form-grid">\n                      <div>\n                        <div className="form-group">\n                          <label>Product Name *</label>\n                          <input\n                            type="text"\n                            value={newProduct.name}\n                            onChange={(e) => setNewProduct({...newProduct, name: e.target.value})}\n                            required\n                            placeholder="Enter product name"\n                          />\n                        </div>\n                        <div className="form-group">\n                          <label>Price (₹) *</label>\n                          <input\n                            type="number"\n                            value={newProduct.price}\n                            onChange={(e) => setNewProduct({...newProduct, price: e.target.value})}\n                            required\n                            placeholder="Enter price"\n                          />\n                        </div>\n                        <div className="form-group">\n                          <label>Original Price (₹)</label>\n                          <input\n                            type="number"\n                            value={newProduct.original_price}\n                            onChange={(e) => setNewProduct({...newProduct, original_price: e.target.value})}\n                            placeholder="Enter original price"\n                          />\n                        </div>\n                        <div className="form-group">\n                          <label>Category *</label>\n                          <select\n                            value={newProduct.category}\n                            onChange={(e) => setNewProduct({...newProduct, category: e.target.value})}\n                          >\n                            <option value="festive">Festive</option>\n                            <option value="casual">Casual</option>\n                            <option value="party">Party</option>\n                            <option value="wedding">Wedding</option>\n                            <option value="traditional">Traditional</option>\n                          </select>\n                        </div>\n                      </div>\n                      \n                      <div>\n                        <div className="form-group">\n                          <label>Sizes (comma separated) *</label>\n                          <input\n                            type="text"\n                            value={newProduct.sizes}\n                            onChange={(e) => setNewProduct({...newProduct, sizes: e.target.value})}\n                            placeholder="S,M,L,XL,XXL"\n                          />\n                        </div>\n                        <div className="form-group">\n                          <label>Fabric</label>\n                          <input\n                            type="text"\n                            value={newProduct.fabric}\n                            onChange={(e) => setNewProduct({...newProduct, fabric: e.target.value})}\n                            placeholder="Cotton, Silk, etc."\n                          />\n                        </div>\n                        <div className="form-group">\n                          <label>Image URLs (one per line)</label>\n                          <textarea\n                            rows="4"\n                            value={newProduct.images.join(\'\\n\')}\n                            onChange={(e) => setNewProduct({...newProduct, images: e.target.value.split(\'\\n\')})}\n                            placeholder="https://example.com/image1.jpg&#10;https://example.com/image2.jpg"\n                          />\n                        </div>\n                        <div className="form-group">\n                          <label>Description</label>\n                          <textarea\n                            rows="3"\n                            value={newProduct.description}\n                            onChange={(e) => setNewProduct({...newProduct, description: e.target.value})}\n                            placeholder="Enter product description"\n                          />\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div style={{display: \'flex\', gap: \'1rem\', marginTop: \'2rem\'}}>\n                      <button type="submit" className="btn btn-primary" style={{flex: 1}}>\n                        <i className="fas fa-save"></i> Add Product\n                      </button>\n                      <button \n                        type="button" \n                        className="btn btn-outline" \n                        onClick={() => setCurrentTab(\'products\')}\n                        style={{flex: 1}}\n                      >\n                        <i className="fas fa-arrow-left"></i> Back to Products\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminPanel;']
Observation: Successfully wrote 1 files:
- /app/frontend/src/components/AdminPanel.js
